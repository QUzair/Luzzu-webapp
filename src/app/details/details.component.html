<h1>Profile</h1>
<ul>
	<li><h2>{{label}}</h2></li>
	<li>
		<h3>Assessment Dates</h3>
		<mat-button-toggle-group #group="matButtonToggleGroup" vertical>
		  <mat-button-toggle (click)="DisplayLatest()" value='Latest'>
		    Latest
		  </mat-button-toggle>
		  <mat-button-toggle *ngFor="let date of AssessDates['Assessment-Dates']" (click)="newDate(date)" value={{date}}>
		    {{date}}
		  </mat-button-toggle>
		</mat-button-toggle-group>
		<div class="selected-value"><strong>Showing Date:</strong></div><div *ngIf="!group.value" class="selected-value"> Latest </div><div class="selected-value"> {{group.value}} </div>
		<mat-error *ngIf="Syntax_boolean">Data has Syntax Errors and is unable to be assessed over any other Metrics</mat-error>
	</li>
</ul>	
<ul>					
	<li>
		<mat-slide-toggle class="example-margin" [(ngModel)]="filterMetrics">
			Filter
		</mat-slide-toggle>
	</li>
	<div *ngIf="filterMetrics">
	  <mat-expansion-panel>

	    <mat-expansion-panel-header>
	      <mat-panel-title>
	      	Metric Filter
	      </mat-panel-title>
	      <mat-panel-description>
	        Select What type of Metrics you wish to view
	      </mat-panel-description>
	    </mat-expansion-panel-header>

		<mat-form-field>
		  <mat-select placeholder="Categories" [formControl]="CategoriesF" multiple>
		    <mat-option (click)="showDimen=true" *ngFor="let cat of CatList" [value]="cat">{{cat}}</mat-option>
		  </mat-select>
		</mat-form-field>
		<br>
			<mat-form-field>
			  <mat-select placeholder="Dimensions" [formControl]="DimensionsF" multiple>
			    <mat-option>-- None --</mat-option>
			    <mat-optgroup *ngFor="let group of posts$" [label]="group.Label">
			      <mat-option *ngFor="let dimen of group.Dimensions" [value]="dimen.Label">
			        {{dimen.Label}}
			      </mat-option>
			    </mat-optgroup>
			  </mat-select>
			</mat-form-field>

		<mat-form-field class="example-full-width">
	    	 <input matInput placeholder="Min Value" [formControl]="minForm">
	  	</mat-form-field>
	  	<mat-form-field class="example-full-width">
	    	 <input matInput placeholder="Max Value" [formControl]="maxForm">
	  	</mat-form-field>
	  	 <mat-error *ngIf="(maxForm.value-minForm.value)<0">
	      Minimum can not be greater than Maximum
	      Min: {{minForm.value}} Max: {{maxForm.value}} {{maxForm.value-minForm.value}}
	    </mat-error>
	    <mat-error *ngIf="!(minForm.value>=0 && maxForm.value<=100)">
	      Please enter value between 0 and 100
	    </mat-error>
	     <mat-error *ngIf="minForm.hasError('required')">
	      Min and Max Values are <strong>required</strong>
	    </mat-error>
	    <div (click)="filter()"><i class="material-icons">filter_list</i>	<button mat-button [disabled]="(maxForm.value-minForm.value)<0 || minForm.hasError('required')">Filter</button></div>
	  </mat-expansion-panel>
	</div>
</ul>

<mat-tab-group>
  <mat-tab label="Quality Metadata Visualisation"> 
	<ul>
		<li>
			<h3>Radar Chart</h3>
			<div *ngIf="radarChart">
				<canvas id="radar1">{{radarChart}}</canvas>
			</div>
		</li>
		<li>
			<h3>Bar Chart</h3>
			<div *ngIf="barChart">
				<canvas id="bar1">{{barChart}}</canvas>
			</div>
		</li>
	</ul>
  </mat-tab>

  <mat-tab label="Metrics"> 
  	<ng-template matTabContent>
  	<div class="Container">
        <div class="Left">
        	<ul>		
				<li (click)="openDialog()"><i class="material-icons">settings_applications</i>	<button mat-button>Configure Metric Thresholds</button></li>
				<li>Current Value <br> <font color="#A1C181">Threshold Value</font><br></li>
				<div *ngIf="!filterMetrics">
					<div  *ngFor="let metric of quality_metrics; let i=index" (click)="quality_metrics[i].show=!quality_metrics[i].show">
						<div id="mydiv" style="background:white" onmouseover="this.style.background='gray';" onmouseout="this.style.background='white';">
						<li (click)="newMetricProfile(metric)">
							{{metric['Metric-Label']}}
							<h5>
								<div *ngIf="metric['Observations'][0]['Value-Type']==='Double'">
									{{precise(metric['Observations'][0].Value)}} % <font color="#A1C181">{{precise(metric.weight)}} %</font>
									<div><mat-progress-bar class="progress-bar" mode="determinate" [value]="(quality_metrics[i]['Observations'][0].Value/quality_metrics[i].weight)*100"></mat-progress-bar></div>
								</div>   
								<div *ngIf="metric['Observations'][0]['Value-Type']==='Boolean'">
									{{(metric['Observations'][0].Value)}} 
									<font color="#A1C181">{{boolValue(metric.weight)}}</font>
									<div><mat-progress-bar class="progress-bar" mode="determinate" [value]="booleanBar(quality_metrics[i]['Observations'][0].Value,quality_metrics[i].weight)"></mat-progress-bar></div>
								</div> 
								<div *ngIf="metric['Observations'][0]['Value-Type']==='Integer'">
									{{metric['Observations'][0].Value}} 
									<font color="#A1C181">{{metric.weight}}</font>
									<div><mat-progress-bar class="progress-bar" mode="determinate" [value]="(quality_metrics[i]['Observations'][0].Value/quality_metrics[i].weight)*100"></mat-progress-bar></div>
								</div>  
								</h5>
						</li>
						</div>
					</div>
				</div>

				<div *ngIf="filterMetrics">
					<div  *ngFor="let Fmetric of Filteredmetrics; let s=index">
						<li (click)="newMetricProfile(Fmetric)">{{Fmetric['Metric-Label']}}
							<h5>{{Fmetric['Observations'][0].Value}}    <font color="#A1C181">{{Fmetric.weight}}</font></h5>
							<mat-progress-bar mode="determinate" [value]="(Fmetric['Observations'][0].Value/Fmetric.weight)*100"></mat-progress-bar>

						</li>
					</div>
				</div>

			</ul>
		</div>
        <div class="Middle" *ngIf="showProfilePage">
        	<app-metric-profile></app-metric-profile> 
        </div>
    </div>
	</ng-template>
  </mat-tab>
</mat-tab-group>
